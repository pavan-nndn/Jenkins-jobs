pipeline {
    agent any

    stages {
        stage('Build') {
            steps {
                script {
                    echo 'starting the build state'
                    sh 'pwd'
                     //Map servers = readJSON file: serverConfig
                     //sshagent(credentials: ["guxgit1"]) {
                     //echo 'ssh is working'
                     //sh 'ssh -i'
                     //}
                     //echo servers
                     
                     configFileProvider(
                            [configFile(fileId: 'ServerConfig', variable: 'serverConfig',targetLocation:'./workspace/Declarative-Pipeline-Jobs/d-pipeline-test/')]) {
                        echo serverConfig
                     echo 'ending the build state'
                     }
                }
            }
        }
    }
}
